@model NutriPlat.WebApp.Models.ErrorViewModel
@{
    ViewData["Title"] = "Error";
    // Asumiendo que tienes un _Layout.cshtml que define la estructura principal
    Layout = "_Layout";
}

<div class="container mx-auto px-4 py-8">
    <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-md shadow-md" role="alert">
        <div class="flex">
            <div class="py-1">
                <svg class="fill-current h-6 w-6 text-red-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 5v6h2V5H9zm0 8v2h2v-2H9z" /></svg>
            </div>
            <div>
                <p class="text-2xl font-bold">Ha ocurrido un error.</p>
                <p class="text-lg mt-2">Se ha producido un error inesperado al procesar tu solicitud.</p>

                @if (Model != null && Model.ShowRequestId)
                {
                    <p class="mt-4 text-sm">
                        <strong class="font-semibold">ID de la Solicitud:</strong> <code class="bg-red-200 text-red-800 px-2 py-1 rounded">@Model.RequestId</code>
                    </p>
                    <p class="text-xs mt-1">
                        Si te pones en contacto con el soporte técnico, por favor incluye este ID de solicitud.
                    </p>
                }

                @* // Podrías añadir más detalles del error aquí si los pasas a través del ErrorViewModel,
                // pero ten cuidado de no exponer información sensible en producción.
                // Por ejemplo:
                if (!string.IsNullOrEmpty(Model?.ErrorMessage))
                {
                    <p class="mt-3"><strong>Mensaje:</strong> @Model.ErrorMessage</p>
                }
                if (Model?.StatusCode.HasValue ?? false)
                {
                     <p class="mt-1"><strong>Código de Estado:</strong> @Model.StatusCode</p>
                }
                *@

                <div class="mt-6">
                    <a asp-controller="Home" asp-action="Index"
                       class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        Volver a la página de inicio
                    </a>
                </div>
            </div>
        </div>
    </div>

    @if (ViewData["DetailedError"] != null && (ViewContext.HttpContext.Request.Host.Host.Contains("localhost") || ViewContext.HttpContext.Request.Host.Host.Contains("127.0.0.1")))
    {
        <div class="mt-8 p-4 bg-gray-800 text-gray-200 rounded-md overflow-x-auto">
            <h3 class="text-xl font-semibold mb-2 text-yellow-400">Información Detallada del Error (Solo Desarrollo):</h3>
            <pre class="whitespace-pre-wrap"><code>@ViewData["DetailedError"]</code></pre>
        </div>
    }
</div>
